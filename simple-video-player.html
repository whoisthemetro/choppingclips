<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Chopper</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            padding: 40px 20px;
        }

        .container {
            width: 100%;
            max-width: 1000px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: white;
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 10px;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);
            letter-spacing: -1px;
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 18px;
            font-weight: 400;
        }

        .video-container {
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }

        .file-path-container {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .fps-converter-container {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .converter-container {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .converter-header {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .converter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .converter-btn {
            background: #1a1a1a;
            color: white;
            border: 2px solid #444;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            min-width: 120px;
        }

        .converter-btn:hover {
            border-color: #FF5722;
            background: #2a2a2a;
        }

        .converter-btn.selected {
            background: #FF5722;
            border-color: #FF5722;
        }

        .converter-btn.wmv-btn:hover {
            border-color: #2196F3;
        }

        .converter-btn.wmv-btn.selected {
            background: #2196F3;
            border-color: #2196F3;
        }

        .converter-info {
            color: #aaa;
            font-size: 13px;
            margin-top: 10px;
            line-height: 1.5;
        }

        .converter-selected {
            color: #FF5722;
            font-weight: 600;
            margin-top: 10px;
            font-size: 14px;
        }

        .fps-converter-header {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .fps-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .fps-btn {
            background: #1a1a1a;
            color: white;
            border: 2px solid #444;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            min-width: 100px;
        }

        .fps-btn:hover {
            border-color: #2196F3;
            background: #2a2a2a;
        }

        .fps-btn.selected {
            background: #2196F3;
            border-color: #2196F3;
        }

        .fps-info {
            color: #aaa;
            font-size: 13px;
            margin-top: 10px;
            line-height: 1.5;
        }

        .fps-selected {
            color: #2196F3;
            font-weight: 600;
            margin-top: 10px;
            font-size: 14px;
        }

        .file-path-header {
            color: white;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .file-path-input-group {
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }

        .file-path-input {
            flex: 1;
            background: #1a1a1a;
            border: 1px solid #444;
            color: white;
            padding: 12px;
            border-radius: 5px;
            font-size: 14px;
            outline: none;
            font-family: 'Courier New', monospace;
        }

        .file-path-input:focus {
            border-color: #2196F3;
        }

        .file-path-input::placeholder {
            color: #666;
        }

        .save-path-btn {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
            white-space: nowrap;
        }

        .save-path-btn:hover {
            background: #45a049;
            transform: none;
        }

        .path-info {
            color: #aaa;
            font-size: 13px;
            margin-top: 10px;
            line-height: 1.5;
        }

        .current-path {
            color: #2196F3;
            font-weight: 600;
            margin-top: 10px;
            font-size: 14px;
        }

        .file-input-container {
            width: 100%;
            padding: 15px;
            background: #2a2a2a;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .file-input-label {
            background: #2196F3;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            white-space: nowrap;
        }

        .file-input-label:hover {
            background: #1976D2;
        }

        #videoFile {
            display: none;
        }

        .file-name {
            color: #aaa;
            font-size: 14px;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .file-name.selected {
            color: white;
        }

        video {
            width: 100%;
            display: block;
        }

        .controls {
            background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0.7));
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.1);
        }

        button svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        .progress-container {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: #2196F3;
            border-radius: 3px;
            width: 0%;
            transition: width 0.1s;
        }

        .time {
            color: white;
            font-size: 14px;
            min-width: 100px;
            text-align: center;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input[type="range"] {
            width: 80px;
            cursor: pointer;
        }

        .clips-panel {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        }

        .clips-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .clips-header h2 {
            color: #1a1a1a;
            font-size: 24px;
            font-weight: 700;
        }

        .bulk-import-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
        }

        .bulk-import-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
        }

        .bulk-import-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .bulk-import-modal.show {
            display: flex;
        }

        .bulk-import-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .bulk-import-title {
            color: #1a1a1a;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .bulk-import-instructions {
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .bulk-import-example {
            background: #f0fdf4;
            padding: 16px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            color: #10b981;
            font-size: 13px;
            margin-bottom: 20px;
            white-space: pre-line;
            border: 1px solid #d1fae5;
        }

        .bulk-import-textarea {
            width: 100%;
            min-height: 200px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            color: #1a1a1a;
            padding: 16px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            outline: none;
            margin-bottom: 24px;
            transition: all 0.3s ease;
        }

        .bulk-import-textarea:focus {
            border-color: #f5576c;
            box-shadow: 0 0 0 4px rgba(245, 87, 108, 0.1);
        }

        .bulk-import-buttons {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .bulk-import-submit {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 12px 28px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
        }

        .bulk-import-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
        }

        .bulk-import-cancel {
            background: #e9ecef;
            color: #495057;
            padding: 12px 28px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .bulk-import-cancel:hover {
            background: #dee2e6;
        }

        .footer {
            text-align: center;
            padding: 30px 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
            margin-top: 40px;
        }

        .footer a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 600;
        }

        .footer a:hover {
            color: white;
        }
            padding: 12px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            color: #4CAF50;
            font-size: 13px;
            margin-bottom: 20px;
            white-space: pre-line;
        }

        .bulk-import-textarea {
            width: 100%;
            min-height: 200px;
            background: #1a1a1a;
            border: 1px solid #444;
            color: white;
            padding: 12px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            outline: none;
            margin-bottom: 20px;
        }

        .bulk-import-textarea:focus {
            border-color: #9C27B0;
        }

        .bulk-import-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .bulk-import-submit {
            background: #4CAF50;
            color: white;
            padding: 10px 24px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }

        .bulk-import-submit:hover {
            background: #45a049;
        }

        .bulk-import-cancel {
            background: #666;
            color: white;
            padding: 10px 24px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }

        .bulk-import-cancel:hover {
            background: #555;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 12px;
            margin-top: 30px;
        }

        .footer a {
            color: #888;
            text-decoration: none;
        }

        .footer a:hover {
            color: #2196F3;
        }

        .clip-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .clip-item:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }

        .clip-item.active {
            border-color: #667eea;
        }

        .clip-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .clip-title {
            color: #1a1a1a;
            font-weight: 600;
            font-size: 16px;
        }

        .clip-actions {
            display: flex;
            gap: 8px;
        }

        .clip-btn {
            background: #e9ecef;
            color: #495057;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .clip-btn:hover {
            background: #dee2e6;
            transform: translateY(-1px);
        }

        .clip-btn.delete {
            background: #fff5f5;
            color: #e53e3e;
        }

        .clip-btn.delete:hover {
            background: #fed7d7;
        }

        .clip-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .time-input {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .time-input label {
            color: #aaa;
            font-size: 12px;
            font-weight: 500;
        }

        .time-input input {
            background: #333;
            border: 1px solid #444;
            color: white;
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
            outline: none;
            width: 100%;
        }

        .time-input input:focus {
            border-color: #2196F3;
        }

        .time-input input[type="text"] {
            font-family: 'Courier New', monospace;
        }

        .set-current-btn {
            background: #4CAF50;
            color: white;
            padding: 6px;
            border-radius: 4px;
            font-size: 11px;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }

        .set-current-btn:hover {
            background: #45a049;
            transform: none;
        }

        .clip-duration {
            color: #888;
            font-size: 12px;
            margin-top: 8px;
        }

        .no-clips {
            color: #888;
            text-align: center;
            padding: 40px;
            font-size: 14px;
        }

        .export-section {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 2px solid #e9ecef;
        }

        .screenshot-option {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 2px solid #e9ecef;
        }

        .screenshot-checkbox {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .screenshot-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .screenshot-checkbox label {
            color: #495057;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            user-select: none;
        }

        .screenshot-info {
            color: #6c757d;
            font-size: 13px;
            margin-top: 8px;
            margin-left: 32px;
        }

        .export-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .export-btn {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            box-shadow: 0 4px 15px rgba(250, 112, 154, 0.3);
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(250, 112, 154, 0.4);
        }

        .reset-btn {
            background: white;
            color: #e53e3e;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            border: 2px solid #e53e3e;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .reset-btn:hover {
            background: #fff5f5;
            transform: translateY(-2px);
        }

        .ffmpeg-commands {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .ffmpeg-commands.show {
            display: block;
        }

        .ffmpeg-title {
            color: #1a1a1a;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .command-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .command-label {
            color: #667eea;
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .command-text {
            color: #10b981;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            word-break: break-all;
            line-height: 1.6;
            background: #f0fdf4;
            padding: 16px;
            border-radius: 8px;
            position: relative;
            border: 1px solid #d1fae5;
        }

        .copy-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 13px;
            border: none;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .copy-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .copy-btn.copied {
            background: #10b981;
        }

        .instructions {
            background: white;
            border-left: 4px solid #667eea;
            padding: 16px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .instructions-title {
            color: #1a1a1a;
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .instructions-text {
            color: #495057;
            font-size: 14px;
            line-height: 1.8;
        }

        .instructions-text a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .instructions-text a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Video Chopper</h1>
            <p>Chop your videos into perfect clips</p>
        </div>

        <div class="file-path-container">
            <div class="file-path-header">Video File Path</div>
            <div class="file-path-input-group">
                <input 
                    type="text" 
                    class="file-path-input" 
                    id="filePathInput"
                    placeholder="Enter the full path to your video file (e.g., /Users/username/Videos/myvideo.mp4 or C:\Users\username\Videos\myvideo.mp4)"
                >
                <button class="save-path-btn" id="savePathBtn">Save Path</button>
            </div>
            <div class="path-info">
                Paste the complete file path from your computer. This will be used in the FFmpeg commands.
            </div>
            <div class="current-path" id="currentPath" style="display: none;"></div>
        </div>

        <div class="video-container" style="display: none;">
            <div class="file-input-container">
                <label for="videoFile" class="file-input-label">Choose Video File</label>
                <input type="file" id="videoFile" accept="video/*">
                <span class="file-name" id="fileName">No file selected</span>
            </div>
            <video id="video">
                <source src="" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="controls">
                <button id="playPause">
                    <svg id="playIcon" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg id="pauseIcon" viewBox="0 0 24 24" style="display: none;">
                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                    </svg>
                </button>
                
                <div class="time">
                    <span id="currentTime">0:00</span> / <span id="duration">0:00</span>
                </div>
                
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                
                <div class="volume-container">
                    <button id="mute">
                        <svg id="volumeIcon" viewBox="0 0 24 24">
                            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
                        </svg>
                        <svg id="muteIcon" viewBox="0 0 24 24" style="display: none;">
                            <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                        </svg>
                    </button>
                    <input type="range" id="volume" min="0" max="100" value="100">
                </div>
                
                <button id="fullscreen">
                    <svg viewBox="0 0 24 24">
                        <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="clips-panel">
            <div class="clips-header">
                <h2>Video Clips</h2>
                <button class="bulk-import-btn" id="bulkImportBtn">Paste Timestamps</button>
            </div>
            <div id="clipsList">
                <div class="no-clips">No clips yet. Click "Paste Timestamps" to add clips.</div>
            </div>
            
            <div class="export-section">
                <div class="screenshot-option">
                    <div class="screenshot-checkbox">
                        <input type="checkbox" id="screenshotCheckbox">
                        <label for="screenshotCheckbox">Capture first frame as PNG</label>
                    </div>
                    <div class="screenshot-info">Creates a PNG image of the first frame for each clip</div>
                </div>
                
                <div class="export-buttons">
                    <button class="export-btn" id="exportBtn">Generate FFmpeg Command</button>
                    <button class="reset-btn" id="resetBtn">Reset All</button>
                </div>
                <div class="ffmpeg-commands" id="ffmpegCommands"></div>
            </div>
        </div>

        <div class="bulk-import-modal" id="bulkImportModal">
            <div class="bulk-import-content">
                <div class="bulk-import-title">Paste All Timestamps</div>
                <div class="bulk-import-instructions">
                    Paste your timestamps in the format below. Each line should have a start time and end time separated by a dash:
                </div>
                <div class="bulk-import-example">00:10 - 00:25
01:30 - 02:15
03:00 - 03:45</div>
                <textarea class="bulk-import-textarea" id="bulkImportTextarea" placeholder="Paste your timestamps here..."></textarea>
                <div class="bulk-import-buttons">
                    <button class="bulk-import-cancel" id="bulkImportCancel">Cancel</button>
                    <button class="bulk-import-submit" id="bulkImportSubmit">Import Clips</button>
                </div>
            </div>
        </div>

        <div class="footer">
            Created by whoistheMETRO
        </div>
    </div>

    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            
            const video = document.getElementById('video');
            const playPause = document.getElementById('playPause');
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            const progressBar = document.getElementById('progressBar');
            const progressContainer = document.getElementById('progressContainer');
            const currentTimeEl = document.getElementById('currentTime');
            const durationEl = document.getElementById('duration');
            const volumeSlider = document.getElementById('volume');
            const muteBtn = document.getElementById('mute');
            const volumeIcon = document.getElementById('volumeIcon');
            const muteIcon = document.getElementById('muteIcon');
            const fullscreenBtn = document.getElementById('fullscreen');
            const videoFileInput = document.getElementById('videoFile');
            const fileNameDisplay = document.getElementById('fileName');
            const filePathInput = document.getElementById('filePathInput');
            const savePathBtn = document.getElementById('savePathBtn');
            const currentPathDisplay = document.getElementById('currentPath');
            const screenshotCheckbox = document.getElementById('screenshotCheckbox');
            const clipsList = document.getElementById('clipsList');
            const exportBtn = document.getElementById('exportBtn');
            const resetBtn = document.getElementById('resetBtn');
            const ffmpegCommands = document.getElementById('ffmpegCommands');
            const bulkImportBtn = document.getElementById('bulkImportBtn');
            const bulkImportModal = document.getElementById('bulkImportModal');
            const bulkImportTextarea = document.getElementById('bulkImportTextarea');
            const bulkImportSubmit = document.getElementById('bulkImportSubmit');
            const bulkImportCancel = document.getElementById('bulkImportCancel');

            console.log('Reset button found:', resetBtn);

            let clips = [];
            let clipIdCounter = 0;
            let videoFilePath = '';
            let captureScreenshot = false;

        savePathBtn.addEventListener('click', () => {
            let path = filePathInput.value.trim();
            
            // Remove leading and trailing quotes if present
            if ((path.startsWith('"') && path.endsWith('"')) || 
                (path.startsWith("'") && path.endsWith("'"))) {
                path = path.slice(1, -1);
            }
            
            if (path) {
                videoFilePath = path;
                currentPathDisplay.textContent = `Current path: ${path}`;
                currentPathDisplay.style.display = 'block';
                filePathInput.value = path; // Update input to show cleaned path
            }
        });

        videoFileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                video.src = url;
                video.load();
                
                videoFilePath = file.name;
                fileNameDisplay.textContent = file.name;
                fileNameDisplay.classList.add('selected');
            }
        });

        playPause.addEventListener('click', () => {
            if (video.paused) {
                video.play();
            } else {
                video.pause();
            }
        });

        video.addEventListener('play', () => {
            playIcon.style.display = 'none';
            pauseIcon.style.display = 'block';
        });

        video.addEventListener('pause', () => {
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
        });

        video.addEventListener('timeupdate', () => {
            const progress = (video.currentTime / video.duration) * 100;
            progressBar.style.width = progress + '%';
            currentTimeEl.textContent = formatTime(video.currentTime);
        });

        video.addEventListener('loadedmetadata', () => {
            durationEl.textContent = formatTime(video.duration);
        });

        progressContainer.addEventListener('click', (e) => {
            const rect = progressContainer.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            video.currentTime = pos * video.duration;
        });

        volumeSlider.addEventListener('input', (e) => {
            video.volume = e.target.value / 100;
            updateVolumeIcon();
        });

        muteBtn.addEventListener('click', () => {
            video.muted = !video.muted;
            updateVolumeIcon();
        });

        function updateVolumeIcon() {
            if (video.muted || video.volume === 0) {
                volumeIcon.style.display = 'none';
                muteIcon.style.display = 'block';
            } else {
                volumeIcon.style.display = 'block';
                muteIcon.style.display = 'none';
            }
        }

        fullscreenBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.querySelector('.video-container').requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        });

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function secondsToMMSS(seconds) {
            if (isNaN(seconds)) return '00:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function MMSSToSeconds(timeStr) {
            const parts = timeStr.split(':');
            if (parts.length === 2) {
                const mins = parseInt(parts[0]) || 0;
                const secs = parseInt(parts[1]) || 0;
                return mins * 60 + secs;
            }
            return 0;
        }

        video.addEventListener('click', () => {
            if (video.paused) {
                video.play();
            } else {
                video.pause();
            }
        });

        screenshotCheckbox.addEventListener('change', (e) => {
            captureScreenshot = e.target.checked;
        });

        bulkImportBtn.addEventListener('click', () => {
            bulkImportModal.classList.add('show');
            bulkImportTextarea.focus();
        });

        bulkImportCancel.addEventListener('click', () => {
            bulkImportModal.classList.remove('show');
            bulkImportTextarea.value = '';
        });

        bulkImportSubmit.addEventListener('click', () => {
            const text = bulkImportTextarea.value.trim();
            if (!text) {
                return;
            }

            const lines = text.split('\n');
            let importedCount = 0;

            lines.forEach(line => {
                line = line.trim();
                if (!line) return;

                // Match pattern like "00:10 - 00:25" or "00:10-00:25"
                const match = line.match(/(\d{1,2}:\d{2})\s*-\s*(\d{1,2}:\d{2})/);
                if (match) {
                    const startTime = MMSSToSeconds(match[1]);
                    const endTime = MMSSToSeconds(match[2]);

                    if (!isNaN(startTime) && !isNaN(endTime) && endTime > startTime) {
                        const clipId = clipIdCounter++;
                        clips.push({
                            id: clipId,
                            start: startTime,
                            end: endTime,
                            name: `Clip ${clips.length + 1}`
                        });
                        importedCount++;
                    }
                }
            });

            if (importedCount > 0) {
                renderClips();
                bulkImportModal.classList.remove('show');
                bulkImportTextarea.value = '';
            }
        });

        // Close modal when clicking outside
        bulkImportModal.addEventListener('click', (e) => {
            if (e.target === bulkImportModal) {
                bulkImportModal.classList.remove('show');
                bulkImportTextarea.value = '';
            }
        });

        function renderClips() {
            if (clips.length === 0) {
                clipsList.innerHTML = '<div class="no-clips">No clips yet. Click "Add Clip" to create your first clip.</div>';
                return;
            }

            clipsList.innerHTML = clips.map(clip => `
                <div class="clip-item" data-clip-id="${clip.id}">
                    <div class="clip-header">
                        <div class="clip-title">${clip.name}</div>
                        <div class="clip-actions">
                            <button class="clip-btn delete" data-clip-id="${clip.id}">Delete</button>
                        </div>
                    </div>
                    <div class="clip-controls">
                        <div class="time-input">
                            <label>Start Time (MM:SS)</label>
                            <input type="text" value="${secondsToMMSS(clip.start)}" 
                                   class="start-input" data-clip-id="${clip.id}"
                                   placeholder="00:00">
                        </div>
                        <div class="time-input">
                            <label>End Time (MM:SS)</label>
                            <input type="text" value="${secondsToMMSS(clip.end)}" 
                                   class="end-input" data-clip-id="${clip.id}"
                                   placeholder="00:10">
                        </div>
                    </div>
                    <div class="clip-duration">Duration: ${formatTime(clip.end - clip.start)}</div>
                </div>
            `).join('');

            attachClipEventListeners();
        }

        function attachClipEventListeners() {
            document.querySelectorAll('.delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const clipId = parseInt(e.target.dataset.clipId);
                    clips = clips.filter(c => c.id !== clipId);
                    renderClips();
                });
            });

            document.querySelectorAll('.start-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    const clipId = parseInt(e.target.dataset.clipId);
                    const clip = clips.find(c => c.id === clipId);
                    if (clip) {
                        const value = MMSSToSeconds(e.target.value);
                        if (!isNaN(value) && value >= 0) {
                            clip.start = value;
                        }
                    }
                });
                
                input.addEventListener('blur', (e) => {
                    const clipId = parseInt(e.target.dataset.clipId);
                    const clip = clips.find(c => c.id === clipId);
                    if (clip) {
                        const value = MMSSToSeconds(e.target.value);
                        if (isNaN(value) || value < 0) {
                            clip.start = 0;
                        }
                        renderClips();
                    }
                });
            });

            document.querySelectorAll('.end-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    const clipId = parseInt(e.target.dataset.clipId);
                    const clip = clips.find(c => c.id === clipId);
                    if (clip) {
                        const value = MMSSToSeconds(e.target.value);
                        if (!isNaN(value) && value >= 0) {
                            clip.end = value;
                        }
                    }
                });
                
                input.addEventListener('blur', (e) => {
                    const clipId = parseInt(e.target.dataset.clipId);
                    const clip = clips.find(c => c.id === clipId);
                    if (clip) {
                        const value = MMSSToSeconds(e.target.value);
                        if (isNaN(value) || value < 0) {
                            clip.end = 10;
                        }
                        renderClips();
                    }
                });
            });
        }

        exportBtn.addEventListener('click', () => {
            if (!videoFilePath) {
                // Visual feedback instead of alert
                filePathInput.style.borderColor = '#e53e3e';
                setTimeout(() => {
                    filePathInput.style.borderColor = '';
                }, 2000);
                return;
            }

            generateFFmpegCommands();
        });

        resetBtn.addEventListener('click', () => {
            const confirmed = confirm('Are you sure you want to reset everything? This will clear the file path, FPS selection, and all clips.');
            if (confirmed) {
                // Clear everything
                clips = [];
                clipIdCounter = 0;
                videoFilePath = '';
                captureScreenshot = false;
                
                // Reset file path UI
                filePathInput.value = '';
                currentPathDisplay.style.display = 'none';
                currentPathDisplay.textContent = '';
                
                // Reset screenshot checkbox
                screenshotCheckbox.checked = false;
                
                // Reset clips UI
                clipsList.innerHTML = '<div class="no-clips">No clips yet. Click "Paste Timestamps" to add clips.</div>';
                
                // Reset FFmpeg commands UI
                ffmpegCommands.innerHTML = '';
                ffmpegCommands.classList.remove('show');
                
                alert('Everything has been reset!');
            }
        });

        function generateFFmpegCommands() {
            // Extract directory path and filename from the input file path
            let outputDir = '';
            let originalFileName = '';
            let fileExtension = '';
            
            if (videoFilePath.includes('/')) {
                // Unix/Mac path
                outputDir = videoFilePath.substring(0, videoFilePath.lastIndexOf('/') + 1);
                originalFileName = videoFilePath.substring(videoFilePath.lastIndexOf('/') + 1);
            } else if (videoFilePath.includes('\\')) {
                // Windows path
                outputDir = videoFilePath.substring(0, videoFilePath.lastIndexOf('\\') + 1);
                originalFileName = videoFilePath.substring(videoFilePath.lastIndexOf('\\') + 1);
            } else {
                // No path, just filename
                originalFileName = videoFilePath;
            }
            
            // Extract extension and base name
            const lastDotIndex = originalFileName.lastIndexOf('.');
            if (lastDotIndex > 0) {
                fileExtension = originalFileName.substring(lastDotIndex);
                originalFileName = originalFileName.substring(0, lastDotIndex);
            } else {
                fileExtension = '.mp4';
            }

            // Detect if Windows path (for choosing correct separator)
            const isWindows = videoFilePath.includes('\\');
            const separator = isWindows ? ' & ' : ' && ';

            // Build commands based on what's selected
            let commandParts = [];

            // If there are clips, process them
            if (clips.length > 0) {
                clips.forEach((clip, index) => {
                    const duration = clip.end - clip.start;
                    const clipNameSafe = clip.name.replace(/\s+/g, '_');
                    const outputFileName = `${originalFileName}_${clipNameSafe}${fileExtension}`;
                    const fullOutputPath = outputDir + outputFileName;
                    
                    // Add screenshot command if enabled
                    if (captureScreenshot) {
                        const screenshotFileName = `${originalFileName}_${clipNameSafe}.png`;
                        const screenshotPath = outputDir + screenshotFileName;
                        const screenshotCommand = `ffmpeg -i "${videoFilePath}" -ss ${clip.start.toFixed(2)} -frames:v 1 "${screenshotPath}"`;
                        commandParts.push(screenshotCommand);
                    } else {
                        // Fast copy without re-encoding for video (only if not capturing screenshot)
                        const command = `ffmpeg -i "${videoFilePath}" -ss ${clip.start.toFixed(2)} -t ${duration.toFixed(2)} -c copy "${fullOutputPath}"`;
                        commandParts.push(command);
                    }
                });
            } 
            // If no clips, process entire video
            else {
                if (captureScreenshot) {
                    // Only screenshot of first frame
                    const screenshotFileName = `${originalFileName}_screenshot.png`;
                    const screenshotPath = outputDir + screenshotFileName;
                    const screenshotCommand = `ffmpeg -i "${videoFilePath}" -frames:v 1 "${screenshotPath}"`;
                    commandParts.push(screenshotCommand);
                } else {
                    // Just copy entire video
                    const outputFileName = `${originalFileName}_copy${fileExtension}`;
                    const fullOutputPath = outputDir + outputFileName;
                    const command = `ffmpeg -i "${videoFilePath}" -c copy "${fullOutputPath}"`;
                    commandParts.push(command);
                }
            }

            // Join all commands with appropriate separator
            const fullCommand = commandParts.join(separator);

            let commandsHTML = `
                <div class="instructions">
                    <div class="instructions-title">How to use this command:</div>
                    <div class="instructions-text">
                        1. Install FFmpeg if you haven't already: <a href="https://ffmpeg.org/download.html" target="_blank">ffmpeg.org/download.html</a><br>
                        2. Open ${isWindows ? 'Command Prompt (cmd)' : 'terminal'}<br>
                        3. Copy the command below<br>
                        4. Paste and run the command - your ${captureScreenshot ? 'PNG screenshots' : (clips.length > 0 ? 'video clips' : 'video')} will be saved automatically<br>
                        ${isWindows ? '5. Note: Use Command Prompt (cmd), not PowerShell<br>' : ''}
                        ${!captureScreenshot && clips.length > 0 ? '6. Note: Using fast copy mode (no re-encoding)' : ''}
                    </div>
                </div>
                <div class="ffmpeg-title">FFmpeg Command:</div>
                <div class="command-item">
                    <div class="command-label">${captureScreenshot ? (clips.length > 0 ? `Creates ${clips.length} PNG screenshot${clips.length > 1 ? 's' : ''}` : 'Creates PNG screenshot') : (clips.length > 0 ? `Creates ${clips.length} clip${clips.length > 1 ? 's' : ''}` : 'Copies entire video')}</div>
                    <div class="command-text">${escapeHtml(fullCommand)}</div>
                    <button class="copy-btn" data-command='${fullCommand.replace(/'/g, "&#39;")}'>Copy Command</button>
                </div>
            `;

            ffmpegCommands.innerHTML = commandsHTML;
            ffmpegCommands.classList.add('show');

            document.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const command = e.target.getAttribute('data-command').replace(/&#39;/g, "'");
                    navigator.clipboard.writeText(command).then(() => {
                        e.target.textContent = 'Copied!';
                        e.target.classList.add('copied');
                        setTimeout(() => {
                            e.target.textContent = 'Copy Command';
                            e.target.classList.remove('copied');
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy:', err);
                        alert('Failed to copy command. Please copy it manually from the text above.');
                    });
                });
            });
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    });
    </script>
</body>
</html>